<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>touristmap - cr√©ateur de circuits touristiques</title>
  <style>
    body {font-family: Inter, Arial, sans-serif; margin:0; padding:0; background:#f6f8fa; color:#111;}
    header, footer {background:#0b5ed7; color:white; padding:14px 20px; position: relative;}
    main {display:flex; gap:16px; padding:16px;}
    section {background:#fff; padding:12px; border-radius:8px; box-shadow:0 2px 8px rgba(0,0,0,0.075);}
    .left {width:360px; height:calc(100vh - 120px); overflow:auto; display:flex; flex-direction: column;}
    .right {flex:1;}
    #modeSelector {
      margin-bottom: 12px;
      display: flex;
      gap: 12px;
      align-items: center;
    }
    label {
      cursor: pointer;
      font-size: 24px;
      padding: 4px;
      user-select: none;
    }
    label input {
      margin-right: 4px;
      vertical-align: middle;
      cursor: pointer;
    }
    label input:checked + span {
      font-weight: bold;
      color: #0b5ed7;
    }
    label span { font-size: 18px; user-select: none; }
    form {
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      gap: 8px;
      max-height: calc(100vh - 280px);
      overflow-y: auto;
    }
    label, input, textarea, button {font-family:inherit;}
    input[type=text], textarea {box-sizing: border-box; max-width: 100%; width: 100%;}
    textarea {max-height: 120px; resize: vertical;}
    button {background:#0b5ed7; color:white; border:none; padding:8px 12px; border-radius:6px; cursor:pointer;}
    .smallbtn {background:#6c757d; padding:6px 8px;}
    .step {border:1px solid #e3e6ea; padding:8px; margin:8px 0; border-radius:8px; background:#fafbfc; display:flex; gap:8px; align-items:flex-start;}
    .step .meta {flex:1;}
    .inline {display:flex; gap:8px; flex-wrap: wrap;}
    #map {width:100%; height:70vh; border-radius:8px;}
    .thumb {width:72px; height:48px; object-fit:cover; border-radius:4px; border:1px solid #ddd;}
    .hint {font-size:13px; color:#666;}
    footer {color:#666; background:inherit;}
    #btnOptimize, #btnQR { display: none; }
    #google_translate_element { position: absolute; top: 16px; right: 20px; }
    #totalInfo { margin-top: 8px; font-size: 14px; font-weight: bold; color: #333; }

    /* --- CSS responsive pour mobile --- */
    @media (max-width: 768px) {
      main {
        flex-direction: column;
        gap: 8px;
      }
      .left, .right {
        width: 100%;
        height: auto;
        max-height: none;
      }
      form {
        max-height: none;
        overflow-y: visible;
      }
      #map {
        height: 50vh;
      }
    }
  </style>
</head>
<body>
  <header>
    <h1>touristmap</h1>
    <h2>cr√©ateur de circuits touristiques</h2>
    <div id="google_translate_element"></div>
  </header>
  <main>
    <section class="left" aria-label="Gestion des √©tapes">
      <div id="modeSelector">
        <label><input type="radio" name="mode" value="WALKING" checked><span>üö∂‚Äç‚ôÇÔ∏è</span></label>
        <label><input type="radio" name="mode" value="BICYCLING"><span>üö¥‚Äç‚ôÄÔ∏è</span></label>
        <label><input type="radio" name="mode" value="DRIVING"><span>üöó</span></label>
        <label><input type="radio" name="mode" value="DRIVING_TRUCK"><span>üöõ</span></label>
      </div>
      <form id="addStepForm" autocomplete="off">
        <input id="inputAddress" type="text" placeholder="Adresse ou lien Maps" required autofocus />
        <input id="inputName" type="text" placeholder="Nom (facultatif)" />
        <textarea id="inputDesc" rows="3" placeholder="Description / notes (facultatif)"></textarea>
        <label class="hint">Photo‚ÄØ: <input id="inputPhoto" type="file" accept="image/*" /></label>
        <div class="inline" style="margin-top:8px">
          <button type="button" id="btnAdd">Ajouter l'√©tape</button>
          <button type="button" id="btnOptimize" class="smallbtn">Optimiser ordre</button>
          <button type="button" id="btnClear" class="smallbtn">Tout effacer</button>
        </div>
      </form>
      <hr />
      <h2>√âtapes (<span id="count">0</span>)</h2>
      <div id="stepsList"></div>
      <div id="totalInfo" aria-live="polite"></div>
      <hr />
      <p class="hint" style="margin-top:8px">
        Les photos/donn√©es restent en local (navigateur). Pour d√©ployer, h√©berge ce fichier sur un site s√©curis√©.
      </p>
    </section>
    <section class="right">
      <h2>Carte</h2>
      <div id="map" aria-label="Carte interactive">Chargement‚Ä¶</div>
      <div class="inline" style="margin-top:8px">
        <button type="button" id="btnOpenGoogle" class="smallbtn">Ouvrir Google Maps</button>
        <button type="button" id="btnExportKML" class="smallbtn">Exporter KML</button>
        <button type="button" id="btnExportGPX" class="smallbtn">Exporter GPX</button>
        <button type="button" id="btnQR" class="smallbtn">QR du parcours</button>
        <button type="button" id="btnOpenWaze" class="smallbtn">Ouvrir Waze</button>
        <button type="button" id="btnOpenTomTom" class="smallbtn">Ouvrir TomTom</button>
        <button type="button" id="btnOpenGarmin" class="smallbtn">Ouvrir Garmin</button>
      </div>
      <div id="qrContainer" style="margin-top:12px"></div>
    </section>
  </main>
  <footer>
    <small>Version client ‚Äî tout fonctionne hors-ligne (sauf g√©ocodification API Google).</small>
  </footer>

  <!-- Scripts inchang√©s -->
  <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDEnoRyrP8_vFUQhK8V9s7ch1DEBECEyiA&libraries=places" async defer></script>

  <script>
    function googleTranslateElementInit() {
      new google.translate.TranslateElement(
        { pageLanguage: 'fr', layout: google.translate.TranslateElement.InlineLayout.SIMPLE },
        'google_translate_element'
      );
    }
  </script>
  <script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

  <script>
    // Ton JS existant reste inchang√©
    // ‚Ä¶ tout le script de gestion des √©tapes, carte, export, etc.
  </script>
</body>
</html>
